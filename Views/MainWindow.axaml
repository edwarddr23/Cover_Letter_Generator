<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:CoverLetterGenerator.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="CoverLetterGenerator.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="CoverLetterGenerator"
        Width="1200"
        Height="600"
        MinWidth="800"
        MinHeight="400"
>

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Styles>
        <!-- Style for ListBoxItem to match sidebar background and change on hover -->
        <Style Selector="ListBoxItem">
            <Setter Property="Background" Value="#1E1E1E"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="ListBoxItem:pointerover">
            <Setter Property="Background" Value="#2A2A2A"/> <!-- Slightly lighter shade on hover -->
            <Setter Property="Foreground" Value="White"/>
        </Style>
    </Window.Styles>

    <Grid>
        <SplitView
            IsPaneOpen="{Binding IsPaneOpen}"
            OpenPaneLength="320"
            CompactPaneLength="80"
            DisplayMode="CompactInline"
            PaneBackground="#1E1E1E"
        >
            <SplitView.Pane>
            <DockPanel LastChildFill="True">
                <!-- Button at top -->
                <Button
                    DockPanel.Dock="Top"
                    Command="{Binding OpenPaneCommand}"
                    Background="#1E1E1E"
                    HorizontalAlignment="Left"
                    Padding="0"
                    Width="80"
                    Height="80"
                >
                    <PathIcon
                        Foreground="White"
                        Data="{StaticResource line_horizontal_3_regular}"
                        Width="35"
                        Height="35"
                    />    
                </Button>

                <!-- Menu ListBox fills remaining space -->
                <ListBox
                    Background="#1E1E1E"
                    Foreground="White"
                    Padding="0"
                    Margin="0"
                    ItemsSource="{Binding MenuEntries}"
                    SelectedItem="{Binding SelectedMenuEntry}"
                >
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="vm:ListItemTemplate">
                            <StackPanel Orientation="Horizontal" Margin="0" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <Viewbox Width="43" Height="43" Margin="6,10,0,0">
                                    <PathIcon Data="{Binding Icon}"/>
                                </Viewbox>
                                <TextBlock Margin="20,10,0,0" FontSize="20" VerticalAlignment="Center" Text="{Binding Label}" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DockPanel>
        </SplitView.Pane>


            <SplitView.Content>
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <ContentControl Background="#2d2d2d" Content="{Binding CurrentViewModel}"/>
                </ScrollViewer>
            </SplitView.Content>
        </SplitView>

        <!-- Version text overlay -->
        <TextBlock
            Text="{Binding AppVersion}"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Margin="10,10,20,20"
            FontSize="15"
            Foreground="LightGray"
            Background="#33000000"
            Padding="4"
        />
    </Grid>
    
</Window>